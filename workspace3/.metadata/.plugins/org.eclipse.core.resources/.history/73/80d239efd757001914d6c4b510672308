package inputGenerator;

import java.util.Random;

import nz.ac.waikato.modeljunit.timing.Time;
import nz.ac.waikato.modeljunit.timing.TimedFsmModel;

import com.liftmania.*;
import 


import inputGeneratorStates.ModelTesting_InputGeneratorStates;

public class ModelTesting_InputGenerator implements TimedFsmModel{ 

	private static final int PROBABILITY_TOTAL = 100;
	private static final int PROBABILITY_BUTTON_PRESS = 10;
    private ModelTesting_InputGeneratorStates modelState = ModelTesting_InputGeneratorStates.VALID;
    private	int numFloors = 0;
    private int numLifts = 0;
    private Random random = new Random();
    private LiftController sut;
    private Lift[] lifts;
    private ArrayList<ServiceList> serviceList;
    
	@Time
    public int now;
	
    @Override
    public int getNextTimeIncrement(Random random) {
        return 1;
    }
	
    @Override
    public ModelTesting_InputGeneratorStates getState() {
        return modelState;
    }

    @Override
    public void reset(boolean reset) {
    	 modelState = ModelTesting_InputGeneratorStates.VALID;
        
         if (reset) {
             //assuming range of floors is between 0 and random max number
        	 numFloors = random.nextInt(10) + 2;
             numLifts = random.nextInt(10) + 2;

             sut = new LiftController(numFloors, numLifts, false);

             lifts = sut.getLifts();

             serviceList = new ArrayList<ServiceList>();

             liftStates = new ArrayList<LiftObject>();
             listOfLifts = new ArrayList<Lift>();

             buttonPressLists = new ArrayList<Lift>();

             liftCounter = 0;
             now = 0;

             currentTimeSlot = 0;
             currentLiftID = 0;
             check = false;
             firstOperation = true;
             for (int i = 0; i < numLifts; i++) {
                 liftStates.add(new LiftObject());
                 listOfLifts.add(new Lift(i));
             }
         }
    }
	
	
	public static void main(String[] args) throws Exception {
		new LiftController(6, 1, false);
		//	new LiftController(6, 3, true);
		//	new LiftController(6, 1, false);
	}
}
